%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
% Institut für Rechnergestuetzte Automation
% Forschungsgruppe Industrial Software
% Arbeitsgruppe ESSE
% http://security.inso.tuwien.ac.at/
% lva.security@inso.tuwien.ac.at
% 
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\documentclass[12pt,a4paper,titlepage,oneside]{scrartcl}
\usepackage{esseProtocol}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
% FOR STUDENTS
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

% Group number or "0" for Lab0
\newcommand{\gruppe}{4}
% Date
\newcommand{\datum}{13.05.2013}
% valid values: "Lab0", "Lab1" (be sure to use Uppercase for first character)
\newcommand{\lab}{Lab1}

% name of course, for example: "IT Security in Large IT Infrastructures", "Security for Systems Engineering", "Introduction to Security"
\newcommand{\lvaname}{Security for Systems Engineering}
% number of course, for example: "183.633", "183.637", "183.594"
\newcommand{\lvanr}{183.637}
% year and term, for example: "SS 2012", "WS 2012", "SS 2013", etc.
\newcommand{\semester}{SS 2013}

% Student data in Lab0 or first student of group in Lab1
\newcommand{\studentAName}{Srdjan Markovic}
\newcommand{\studentAMatrnr}{1025857}
\newcommand{\studentAEmail}{e1025857@student.tuwien.ac.at}

% second student of group in Lab1, for Lab0 you may leave it unchanged
\newcommand{\studentBName}{Julian Großhauser}
\newcommand{\studentBMatrnr}{1234567}
\newcommand{\studentBEmail}{e1234567@student.tuwien.ac.at}

% second student of group in Lab1, for Lab0 you may leave it unchanged
\newcommand{\studentCName}{Bruno Mustermann}
\newcommand{\studentCMatrnr}{0815001}
\newcommand{\studentCEmail}{e0815001@student.tuwien.ac.at}

\newcommand{\studentDName}{Aleksandar Sibincic}
\newcommand{\studentDMatrnr}{0727895}
\newcommand{\studentDEmail}{e0727895@student.tuwien.ac.at}
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
% DO NOT CHANGE THE FOLLOWING PART
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\newcommand{\dokumenttyp}{Abgabedokument \lab}

\begin{document}

\maketitle
\setcounter{section}{0}
\setcounter{tocdepth}{2}
\tableofcontents

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%
% CONTENT OF DOCUMENT STARTS HERE
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\section{Lab1a}

\subsection{Vorgehensweise}
Nachdem man sich in die Übungsumgebung loggt, stehen keine Web Browsing tools (wie zB. browsers, lynx, links o.ä.) zu Verfügung. Deshalb muss man ein anderer Weg finden, die Homepage auf einen Rechner, der von aussen erreichbar ist, zu sehen. Eine Möglichkeit wäre hier den SSH Tunnel(Port Forwarding) zu bauen.
\url{http://wiki.ubuntuusers.de/SSH#SSH-Tunnel}
\url{http://blog.ch-becker.de/2011/02/20/ssh-tunnel-mit-linux/}
(image 1)
Wir haben folgendes Befehl ausgeführt um einen SSH Tunnel zu bauen:
ssh -L 2008:192.168.20.100:8000 XXXXXXX@sela.inso.tuwien.ac.at -p 12345
Nachdem Tunnel aufgebaut ist, man kann sich über dieser Port die Homepage auf dem alten Tomcat sehen. Eingabe der URL http://localhost:2008 bringt uns das gewünschte Homepage.
(image2)
Um zu erfinden um welche Version des Tomcats handelt es, ist genug einen ungültigen Anfrage auf dem Webserver zu senden. Wenn man zB. resource /wrong auffordert (unter http://localhost:2008/wrong), kommt eine Fehlermeldung und man kann leicht sehen,  dass den Webserver Apache Tomcat/6.0.16 ist.
(image3)
Um privaten Schlüssel für Benutzer walter zu bekommen, haben wir folgendes Befehl ausgeführt (siehe Schwachstellen und Angriff): http://127.0.0.1:2008/%c0%ae%c0%ae/%c0%ae%c0%ae/%c0%ae%c0%ae/%c0%ae%c0%ae/%c0%ae%c0%ae/home/walter/.ssh/id_rsa
Mit dieser Schlüssel haben wir dann ein SSH-Zugang auf dem Server gehabt. Wenn wir dieser Schlüssel in der Übungsumgebung kopiert haben, konnten wir uns mit der 
ssh -i id_rsa walter@192.168.20.100 loggen.
(image4)

\subsection{Schwachstellen und Angriff}
Unter \url{http://tomcat.apache.org/security-6.html} gibt es eine Liste der Tomcat6.X.X Schwachstellen. Liste der bekannten Schwachstellen für Tomcat6.0.16 ist unter \url{http://www.cvedetails.com/vulnerability-list/vendor_id-45/product_id-887/version_id-56605/Apache-Tomcat-6.0.16.html} zu finden. Man kann bemerken dass einzige Schwachstelle hier gelistet die einem Angreifer beliebige Daten zu lesen ermöglicht, ist Remote UTF-8 Directory Traversal. Genaue Beschreibung und Spezifikation kann man unter \url{http://cve.mitre.org/cgi-bin/cvename.cgi?name=CVE-2008-2938} lesen. Dieses Problem tritt auf, wenn 'allowLinking' und 'URIencoding=UTF-8' im Tomcat erlaubt sind. Der Grund dafür ist, dass JVM UTF-8-kodierte URLs nicht korrekt dekodiert. Wenn das webroot Verzeichnis hat zB. Tiefe 3 (z.B. /usr/local/wwwroot), man kann auf folgende Weise auf beliebige Daten zuzugreifen: http://www.target.com/%c0%ae%c0%ae/%c0%ae%c0%ae/%c0%ae%c0%ae/foo/bar   . Eine mögliche Lösung um solche Angriffe zu vermeiden wäre entweder 'allowLinking' deaktivieren oder 'URIencoding' nicht auf UTF-8 setzen. Noch besser wäre Upgrade auf eine neuere Version des Tomcat. Mit der Version 6.0.18 ist dieses Problem gelöst.


\section{Ueberschrift 2}

\subsection{Sub-Ueberschrift 1}
Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. 

\subsection{Sub-Ueberschrift 2}
Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. At vero eos et accusam et justo duo dolores et ea rebum. 

\subsection{Sub-Ueberschrift 3}
Lorem ipsum dolor sit amet, consetetur sadipscing elitr, sed diam nonumy eirmod tempor invidunt ut labore et dolore magna aliquyam erat, sed diam voluptua. 

\section{Beispiele}

\subsection{Source Code formatieren}
Es folgen einige Beispiele wie Sourcecode in diesem Dokument formatiert und referenziert werden kann
(\hyperref[code:beispiel1]{siehe Listing~\ref*{code:beispiel1} auf Seite~\pageref*{code:beispiel1}} und \hyperref[code:beispiel2]{siehe Listing~\ref*{code:beispiel2} auf Seite~\pageref*{code:beispiel2}}).

Ebenso können kurzer Code oder kurze Befehle direkt in der Zeile in einem \lstinline{lstinline Block} mit typengleicher Schrift formatiert werden.

\lstinputlisting[caption=Example C/C++ file,label=code:beispiel1,style=c]{example.c}

\begin{lstlisting}[caption=Example bash script,label=code:beispiel2,style=simple]
#!/bin/bash
echo "Bash version ${BASH_VERSION}..."
for i in {0..10..2}
  do
     echo "Welcome $i times"
 done

echo "some very very very very very very very very very very very very very very very very very very very very long string"

exit 0;
\end{lstlisting}

\subsection{Bilder}

Es folgen einige Beispiele wie Bilder in diesem Dokument eingefuegt werden koennen
(\hyperref[fig:logo1]{siehe Abbildung~\ref*{fig:logo1} auf Seite~\pageref*{fig:logo1}}).

\begin{figure}[h!]
  \centering
  \fbox{
    \includegraphics[width=0.4\textwidth]{./imgs/esse-logo-bw.png}
  }
  \caption{ESSE Logo}
  \label{fig:logo1}
\end{figure}


\end{document}


